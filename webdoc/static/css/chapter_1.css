/* chapter_1.css
   - ใช้สไตล์จาก chapter_2 + ปรับโทน/คอมโพเนนต์ให้เข้ากับ chapter_1
   - โครงเลเยอร์: tokens → base → components → utilities
*/

/* ========== นำสไตล์หลักจาก chapter_2 มาใช้ก่อน ========== */
@import url('chapter_2.css');

/* ========== Layer Order ========== */
@layer tokens, base, components, utilities;

/* ========== TOKENS (Design tokens) ========== */
@layer tokens {
  :root {
    /* สีหลัก */
    --c-accent:      #3b82f6; /* primary/blue */
    --c-success:     #16a34a;
    --c-info:        #0ea5e9;
    --c-danger:      #dc2626;

    /* พื้นหลัง/พื้นผิว/ตัวอักษร */
    --c-bg:          #f9fafb;
    --c-card:        #ffffff;
    --c-text:        #111827;
    --c-muted:       #6b7280;
    --c-border:      #e5e7eb;
    --c-focus:       #60a5fa;

    /* Textbox เทาอ่อน */
    --c-textbox-bg:  #f3f4f6;

    /* เงา/ขอบมน/spacing */
    --radius:        10px;
    --radius-lg:     16px;
    --shadow-sm:     0 1px 2px rgba(0,0,0,.06);
    --shadow-md:     0 4px 12px rgba(0,0,0,.08);

    /* Type & spacing scale */
    --font-size:     16px;
    --fs-sm:         14px;
    --fs-md:         16px;
    --fs-lg:         18px;
    --fs-xl:         22px;
    --fs-2xl:        28px;

    --sp-1: 4px;
    --sp-2: 8px;
    --sp-3: 12px;
    --sp-4: 16px;
    --sp-5: 24px;
    --sp-6: 32px;
  }

  /* Dark mode */
  [data-theme="dark"] {
    --c-bg:          #0b1220;
    --c-card:        #0f172a;
    --c-text:        #e5e7eb;
    --c-muted:       #9ca3af;
    --c-border:      #1f2937;
    --c-focus:       #38bdf8;
    --c-textbox-bg:  #111827;
    --shadow-sm:     0 1px 2px rgba(0,0,0,.5);
    --shadow-md:     0 6px 16px rgba(0,0,0,.5);
  }

  @media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
      --c-bg:          #0b1220;
      --c-card:        #0f172a;
      --c-text:        #e5e7eb;
      --c-muted:       #9ca3af;
      --c-border:      #1f2937;
      --c-focus:       #38bdf8;
      --c-textbox-bg:  #111827;
      --shadow-sm:     0 1px 2px rgba(0,0,0,.5);
      --shadow-md:     0 6px 16px rgba(0,0,0,.5);
    }
  }
}

/* ========== BASE (Reset-ish & global) ========== */
@layer base {
  html { font-size: 100%; }
  body {
    margin: 0;
    font-size: var(--font-size);
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
    color: var(--c-text);
    background: var(--c-bg);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .page-shell {
    max-width: 960px;
    margin: 0 auto;
    padding: var(--sp-6) var(--sp-4);
  }

  h1, h2, h3 {
    line-height: 1.25;
    margin: 0 0 var(--sp-4);
    color: var(--c-text);
  }
  h2 { font-size: var(--fs-2xl); }
  h3 { font-size: var(--fs-xl); }

  a { color: var(--c-accent); text-decoration: none; }
  a:hover { text-decoration: underline; }

  :where(button, [type="button"], [type="submit"], input, textarea, a):focus-visible {
    outline: 2px solid var(--c-focus);
    outline-offset: 2px;
    border-radius: calc(var(--radius) - 2px);
  }

  .messages {
    list-style: none;
    padding: 0;
    margin: 0 0 var(--sp-4);
    display: grid;
    gap: var(--sp-2);
  }
  .messages li {
    background: var(--c-card);
    border: 1px solid var(--c-border);
    border-radius: var(--radius);
    padding: var(--sp-3) var(--sp-4);
    box-shadow: var(--shadow-sm);
  }

  /* Toast/Alert */
  #alert-box {
    min-height: 0;
    margin: 0 0 var(--sp-3);
    transition: all .25s ease;
  }
  #alert-box.show {
    background: var(--c-card);
    border: 1px solid var(--c-border);
    border-radius: var(--radius);
    padding: var(--sp-3) var(--sp-4);
    box-shadow: var(--shadow-md);
  }
  #alert-box.info   { color: var(--c-text); }
  #alert-box.success{ color: var(--c-success); }
  #alert-box.warning{ color: #b45309; }
  #alert-box.error,
  #alert-box.danger { color: var(--c-danger); }
}

/* ========== COMPONENTS ========== */
@layer components {
  .section-card-outer {
    background: var(--c-card);
    border: 1px solid var(--c-border);
    border-radius: var(--radius-lg);
    padding: var(--sp-5);
    box-shadow: var(--shadow-md);
    margin-bottom: var(--sp-5);
  }

  .section-title-head {
    font-size: var(--fs-xl);
    font-weight: 600;
    color: var(--c-text);
    margin-bottom: var(--sp-3);
  }

  .section-card-body {
    display: grid;
    gap: var(--sp-3);
  }

  .badge-no {
    display: inline-block;
    background: transparent;
    color: var(--c-muted);
    border: 1px dashed var(--c-border);
    border-radius: 999px;
    padding: 2px 10px;
    font-size: var(--fs-sm);
  }

  .chapter-section-card {
    background: var(--c-card);
    border: 1px solid var(--c-border);
    border-radius: var(--radius);
    box-shadow: var(--shadow-sm);
    padding: var(--sp-4);
    margin-bottom: var(--sp-4);
  }

  .chapter-head-row {
    display: flex;
    align-items: center;
    gap: var(--sp-3);
    margin-bottom: var(--sp-3);
  }

  .chapter-title-input {
    flex: 1 1 auto;
    min-width: 0;
    border: 1px solid var(--c-border);
    border-radius: var(--radius);
    background: var(--c-card);
    color: var(--c-text);
    padding: 10px 12px;
  }

  .overview-block {
    display: grid;
    gap: var(--sp-2);
    margin-bottom: var(--sp-3);
  }

  .overview-label {
    font-size: var(--fs-sm);
    color: var(--c-muted);
  }

  .paras-wrap {
    display: grid;
    gap: var(--sp-3);
  }
  .para-row {
    display: grid;
    gap: var(--sp-2);
  }

  .clean-textarea,
  .main-textarea {
    width: 100%;
    background: var(--c-textbox-bg);
    color: var(--c-text);
    border: 1px solid var(--c-border);
    border-radius: var(--radius);
    padding: 10px 12px;
    resize: vertical;
    min-height: 120px;
  }

  .tree-wrap {
    display: grid;
    gap: var(--sp-3);
  }

  .node-card {
    background: var(--c-card);
    border: 1px dashed var(--c-border);
    border-radius: var(--radius);
    padding: var(--sp-3);
  }

  .node-top-row {
    display: flex;
    align-items: center;
    gap: var(--sp-3);
    margin-bottom: var(--sp-2);
  }

  .node-no-badge {
    font-weight: 600;
    font-variant-numeric: tabular-nums;
    color: var(--c-muted);
    border: 1px solid var(--c-border);
    border-radius: 8px;
    padding: 4px 10px;
  }

  .node-title-input {
    flex: 1 1 auto;
    min-width: 0;
    border: 1px solid var(--c-border);
    border-radius: var(--radius);
    background: var(--c-card);
    color: var(--c-text);
    padding: 8px 10px;
  }

  .children-block {
    display: grid;
    gap: var(--sp-2);
    margin-top: var(--sp-2);
  }

  /* ปุ่มหลัก */
  .main-btn {
    -webkit-appearance: none;
    appearance: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    border: 1px solid var(--c-border);
    background: var(--c-card);
    color: var(--c-text);
    padding: 10px 14px;
    border-radius: var(--radius);
    cursor: pointer;
    box-shadow: var(--shadow-sm);
    transition: transform .08s ease, box-shadow .2s ease, filter .2s ease;
  }
  .main-btn:hover { filter: brightness(1.05); }
  .main-btn:active { transform: translateY(1px); box-shadow: none; }

  .main-btn-neutral { border-color: var(--c-border); }
  .main-btn-success { border-color: color-mix(in srgb, var(--c-success) 50%, var(--c-border)); }
  .main-btn-info    { border-color: color-mix(in srgb, var(--c-info) 50%, var(--c-border)); }
  .main-btn-danger  { border-color: color-mix(in srgb, var(--c-danger) 50%, var(--c-border)); }

  /* ปุ่มใน editor */
  .node-controls { display: inline-flex; gap: var(--sp-2); flex-wrap: wrap; }
  .mini-btn {
    appearance: none;
    border: 1px solid var(--c-border);
    background: var(--c-card);
    color: var(--c-text);
    padding: 6px 10px;
    border-radius: 8px;
    cursor: pointer;
  }

  /* ปุ่มแดง: ชนะสไตล์ฟ้าเดิม */
  .mini-btn.mini-btn-danger,
  .del-para-btn.mini-btn-danger,
  .node-controls .mini-btn-danger {
    background: #fee2e2 !important;
    border: 1px solid #ef4444 !important;
    color: #b91c1c !important;
  }
  .mini-btn.mini-btn-danger:hover,
  .del-para-btn.mini-btn-danger:hover,
  .node-controls .mini-btn-danger:hover {
    background: #fecaca !important;
  }

  .del-para-btn, .add-para-btn {
    justify-self: start;
    border: 1px solid var(--c-border);
    background: var(--c-card);
    color: var(--c-text);
    padding: 6px 10px;
    border-radius: 8px;
    cursor: pointer;
  }
  .del-para-btn.mini-btn-danger{
    background:#fee2e2 !important;
    border-color:#ef4444 !important;
    color:#b91c1c !important;
  }

  .footer-action-bar {
    position: sticky;
    bottom: 0;
    display: flex;
    gap: var(--sp-3);
    justify-content: flex-end;
    padding: var(--sp-3) 0;
    margin-top: var(--sp-5);
    background: linear-gradient(to top, var(--c-bg) 60%, transparent);
  }

  .chapter1-sections-wrapper {
    display: grid;
    gap: var(--sp-4);
  }
}

/* ========== UTILITIES ========== */
@layer utilities {
  .text-center { text-align: center; }
  .w-100 { width: 100%; }

  .mt-1 { margin-top: var(--sp-1); }
  .mt-2 { margin-top: var(--sp-2); }
  .mt-3 { margin-top: var(--sp-3); }
  .mt-4 { margin-top: var(--sp-4); }
  .mt-5 { margin-top: var(--sp-5); }

  .mb-1 { margin-bottom: var(--sp-1); }
  .mb-2 { margin-bottom: var(--sp-2); }
  .mb-3 { margin-bottom: var(--sp-3); }
  .mb-4 { margin-bottom: var(--sp-4); }
  .mb-5 { margin-bottom: var(--sp-5); }

  .sr-only, .visually-hidden {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0,0,0,0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }
}
